<div class="content-wrapper" *ngIf="_token.isAuthenticated()">
    <div class="content-body">
        <div class="card w-100">
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="nyear" class="form-label">
                                <span><strong>{{ 'SELECCIONAR AÑO' | uppercase }}</strong></span>
                            </label>
                            <select class="form-select" id="nyear" [(ngModel)]="selectedYear" (change)="getConsumeDocuments(selectedYear, 0)">
                                <option *ngFor="let year of years" [value]="year">{{ year }}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="nmonth" class="form-label">
                                <span><strong>{{ 'SELECCIONAR MES' | uppercase }}</strong></span>
                            </label>
                            <select class="form-select" id="nmonth" [(ngModel)]="selectedMonth" (change)="getConsumeDocuments(selectedYear, selectedMonth)">
                                <option *ngFor="let month of months" [value]="month.value">{{ month.name }}</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <section id="minimal-statistics">
            <div class="row gx-1">
                <div class="col-md-5">
                    <div class="card">
                        <div class="card-header">
                            <label>
                                <span><strong>{{ 'CONSUMO DE DOCUMENTOS AÑO' | uppercase }}</strong></span>
                            </label>
                        </div>
                        <div class="card-body table-responsive">
                            <table class="table table-striped table-bordered table-layout-content shadow">
                                <caption>
                                    TOTAL DE DOCUMENTOS POR AÑO
                                </caption>
                                <thead>
                                <tr>
                                    <th>Empresa</th>
                                    <th>Año</th>
                                    <th>Total documentos</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr *ngFor="let item of dbs.consumeByYear || []">
                                    <td>{{ item.company_name }}</td>
                                    <td class="text-right">{{ item.nyear }}</td>
                                    <td class="text-right">{{ item.total }}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-md-7">
                    <div class="card">
                        <div class="card-header">
                            <label>
                                <span><strong>{{ 'CONSUMO DE DOCUMENTOS X MES Y AÑO' | uppercase }}</strong></span>
                            </label>
                        </div>
                        <div class="card-body table-responsive">
                            <table class="table table-striped table-bordered table-layout-content shadow">
                                <caption>
                                    TOTAL DE DOCUMENTOS POR MES Y AÑO
                                </caption>
                                <thead>
                                <tr>
                                    <th class="text-left">Empresa</th>
                                    <th class="text-right">Año</th>
                                    <th class="text-right">Mes</th>
                                    <th>Total documentos</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr *ngFor="let item of dbs.consumeByYearAndMonth || []">
                                    <td>{{ item.company_name }}</td>
                                    <td class="text-right">{{ item.nyear }}</td>
                                    <td class="text-right">{{ item.monthname | uppercase }}</td>
                                    <td class="text-right">{{ item.total }}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>